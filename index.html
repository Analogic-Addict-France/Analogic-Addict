<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Analogic Addict France - Accueil</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<nav>
    <div class="nav-container">
        <a href="index.html" class="logo"><img src="img/logo.png" alt="Logo"></a>
        <div class="nav-links">
            <a href="index.html">Accueil</a>
            <a href="generator.html">GÃ©nÃ©rateur</a>
            <a href="wiki.html">Wiki</a>
        </div>
    </div>
</nav>

<audio id="bg-audio" loop>
    <source src="musique-ambiance.mp3" type="audio/mpeg">
</audio>

<div class="container">
    <a href="wiki.html" class="wiki-btn">
        <span>Explorer la base de connaissances</span>
        <span>Aller sur le wiki â†’</span>
    </a>

    <div class="home-grid">
        <div id="music-section">
            <div id="music-container" class="music-card">
                </div>
            <button class="btn" onclick="copyDiscordFormat()" style="margin-top:15px; width:100%; background:#444;">
                ðŸ“‹ Copier le format Discord
            </button>
        </div>

        <div class="discord-widget">
            <iframe src="https://discord.com/widget?id=1183880368173096983&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
        </div>
    </div>
</div>

<script>
    // Audio avec fondu
    const audio = document.getElementById('bg-audio');
    audio.volume = 0;
    
    window.addEventListener('mouseover', () => { // DÃ©clenche au premier mouvement car les navigateurs bloquent l'auto-play pur
        if(audio.paused) {
            audio.play();
            fadeIn(audio);
        }
    }, {once: true});

    function fadeIn(elem) {
        let vol = 0;
        let interval = setInterval(() => {
            if (vol < 0.15) { // Volume max 15% pour rester discret
                vol += 0.01;
                elem.volume = vol;
            } else { clearInterval(interval); }
        }, 200);
    }

    let musicData = {};

    fetch('data.json')
        .then(r => r.json())
        .then(data => {
            musicData = data;
            document.getElementById('music-container').innerHTML = `
                <img src="${data.image}" style="width:100%; max-height:300px; object-fit:cover; border-radius:10px;">
                <h2>${data.titre}</h2>
                <div class="playing-animation"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                <p><strong>Artiste:</strong> ${data.artiste} | <strong>Album:</strong> ${data.album}</p>
                <p><strong>Genre:</strong> ${data.genre}</p>
                <a href="${data.url}" target="_blank" class="btn">Ã‰couter sur YouTube</a>
            `;
        });

    function copyDiscordFormat() {
        const text = `<@&1342094598822166588> \n\n# VOICI LA MUSIQUE DU DEMI MOIS !!\n\n- **Titre** : ${musicData.titre}\n- **Artiste** : ${musicData.artiste}\n- **Date de sortie** : ${musicData.date}\n- **Album** : ${musicData.album}\n- **Genre** : ${musicData.genre}\n- **Support existant** : ${musicData.format}\n- **Langue** : ${musicData.langue}\n\n## Histoire :\n- ${musicData.histoire}\n\n## Liens streaming :\n[Youtube](${musicData.url})`;
        navigator.clipboard.writeText(text);
        alert("Format copiÃ© pour Discord !");
    }
</script>
</body>
</html>
