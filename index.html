<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analogic Addict France - Accueil</title>
    <link rel="stylesheet" href="style.css">
    <style>
        :root {
            --primary: #6C516C;
            --bg: #1B1B1B;
            --text: #f4f4f4;
            --card-bg: #252525;
            --discord-blurple: #5865F2;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0; padding: 0;
        }

        nav {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 10px 0;
            position: sticky; top: 0; z-index: 1000;
            border-bottom: 1px solid var(--primary);
        }

        .nav-container {
            max-width: 1100px; margin: 0 auto;
            display: flex; justify-content: space-between; align-items: center; padding: 0 15px;
        }

        .logo img { height: 35px; width: auto; }
        .nav-links { display: flex; gap: 15px; }
        .nav-links a { color: white; text-decoration: none; font-size: 0.9em; font-weight: bold; }

        .container { max-width: 1100px; margin: auto; padding: 15px; }

        .wiki-btn {
            display: flex; justify-content: space-between; align-items: center;
            background: linear-gradient(90deg, var(--primary), #4a384a);
            padding: 15px; border-radius: 10px; text-decoration: none;
            color: white; font-weight: bold; margin-bottom: 20px; transition: 0.3s;
        }

        .home-grid {
            display: grid; grid-template-columns: 1fr 350px; gap: 20px;
        }

        .music-card {
            background: var(--card-bg); border-radius: 15px; padding: 20px;
            border-left: 5px solid var(--primary); display: flex; flex-direction: column; gap: 15px;
        }

        .music-content-wrapper {
            display: flex; flex-direction: row; gap: 20px; align-items: start;
        }

        .music-img {
            width: 35%; aspect-ratio: 1 / 1; object-fit: cover; border-radius: 10px; background: #111;
        }

        .music-info { width: 65%; }

        .playing-animation {
            display: inline-flex; gap: 3px; height: 15px; margin-left: 10px;
        }
        .bar { width: 3px; background: var(--primary); animation: bounce 1s infinite; }
        @keyframes bounce { 0%, 100% { height: 5px; } 50% { height: 15px; } }

        /* Actions et Boutons */
        .action-buttons {
            display: flex; flex-direction: column; gap: 12px; margin-top: 15px;
        }

        .btn {
            border-radius: 10px; text-decoration: none; display: block;
            text-align: center; font-weight: bold; border: none;
            cursor: pointer; transition: 0.3s; font-size: 1.1em;
        }

        /* Bouton Discord plus Ã©pais pour matcher l'impact visuel du widget */
        .btn-discord {
            background-color: var(--discord-blurple);
            color: white;
            padding: 22px; /* Ã‰paisseur augmentÃ©e */
            box-shadow: 0 4px 15px rgba(88, 101, 242, 0.2);
        }
        .btn-discord:hover { background-color: #4752c4; transform: scale(1.01); }

        .btn-copy {
            background-color: #333;
            color: white;
            padding: 14px;
            border: 1px solid var(--primary);
            font-size: 0.9em;
            opacity: 0.8;
        }
        .btn-copy:hover { opacity: 1; background: #444; }

        @media (max-width: 850px) {
            .home-grid { grid-template-columns: 1fr; }
            .music-content-wrapper { flex-direction: column; }
            .music-img { width: 100%; max-width: 300px; margin: 0 auto; }
            .music-info { width: 100%; text-align: center; }
        }
    </style>
</head>
<body>

<nav>
    <div class="nav-container">
        <a href="index.html" class="logo"><img src="img/logo.png" alt="Logo"></a>
        <div class="nav-links">
            <a href="index.html">Accueil</a>
            <a href="generator.html">GÃ©nÃ©rateur</a>
            <a href="wiki.html">Wiki</a>
        </div>
    </div>
</nav>

<div id="youtube-player"></div>

<div class="container">
    <a href="wiki.html" class="wiki-btn">
        <span>EXPLORER LE WIKI</span>
        <span>â†’</span>
    </a>

    <div class="home-grid">
        <div id="music-section">
            <div id="music-container" class="music-card">
                </div>
            
            <div class="action-buttons">
                <button class="btn btn-copy" onclick="copyDiscordFormat()">
                    ðŸ“‹ Copier le format pour Discord
                </button>
                <a href="TON_LIEN_DINVITATION" target="_blank" class="btn btn-discord">
                    âœ¨ Rejoindre le serveur Discord !
                </a>
            </div>
        </div>

        <div class="discord-widget">
            <iframe src="https://discord.com/widget?id=1183880368173096983&theme=dark" width="100%" height="520" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
        </div>
    </div>
</div>

<script>
    let musicData = {};

    fetch('data.json')
        .then(r => r.json())
        .then(data => {
            if (!Array.isArray(data) || data.length === 0) return;

            // --- LOGIQUE DE SÃ‰LECTION QUOTIDIENNE ---
            const today = new Date();
            // On utilise l'annÃ©e, le mois et le jour pour crÃ©er un index stable sur 24h
            const seed = today.getFullYear() + today.getMonth() + today.getDate();
            const index = seed % data.length; 
            
            const currentMusic = data[index]; 
            musicData = currentMusic;

            // --- MISE Ã€ JOUR DE L'INTERFACE ---
            document.getElementById('music-container').innerHTML = `
                <h2 style="margin:0 0 10px 0;">${currentMusic.titre || 'Titre'} 
                    <div class="playing-animation"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                </h2>
                <div class="music-content-wrapper">
                    <img src="${currentMusic.image}" class="music-img" alt="Pochette">
                    <div class="music-info">
                        <p style="color:var(--primary); font-weight:bold; margin:0;">${currentMusic.artiste || 'Artiste'} â€” ${currentMusic.album || 'Album'}</p>
                        <p style="font-size:0.9em; margin:10px 0;">
                            <strong>Genre :</strong> ${currentMusic.genre || 'Inconnu'}<br>
                            <strong>Langue :</strong> ${currentMusic.langue || 'FranÃ§ais'}<br>
                            <strong>Sortie :</strong> ${currentMusic.date || 'Date'}
                        </p>
                        <div style="background:rgba(0,0,0,0.2); padding:12px; border-radius:8px; font-size:0.85em; border: 1px solid rgba(255,255,255,0.05);">
                            ${currentMusic.histoire || 'Pas d\'histoire disponible.'}
                        </div>
                    </div>
                </div>
            `;
        })
        .catch(err => console.error("Erreur de chargement du JSON :", err));

    // Fonction de copie pour Discord (toujours active)
    function copyDiscordFormat() {
        if (!musicData.titre) return;
        const text = `<@&1342094598822166588> \n\n# MUSIQUE DU JOUR\n- **Titre** : ${musicData.titre}\n- **Artiste** : ${musicData.artiste}\n- **Lien** : ${musicData.url}`;
        navigator.clipboard.writeText(text).then(() => alert("Format Discord copiÃ© !"));
    }
</script>
</body>
</html>
